!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).nspell=e()}}(function(){var e=function e(t,n,r){for(var o,i,s,l,a,f,u=n.entries,c=[],h=-1,p=u.length;++h<p;)if((!(o=u[h]).match||t.match(o.match))&&(i=t,o.remove&&(i=i.replace(o.remove,"")),"SFX"===n.type?i+=o.add:i=o.add+i,c.push(i),(l=o.continuation)&&0!==l.length))for(a=-1,f=l.length;++a<f;)(s=r[l[a]])&&(c=c.concat(e(i,s,r)));return c},t=function(t,r,o,i){var s,l,a,f,u,c,h,p,d,g,O,m,v,w=i.flags,C=i.rules,R=i.compoundRuleCodes;for(n.call(w,"NEEDAFFIX")&&-1!==o.indexOf(w.NEEDAFFIX)||x(r,o),s=-1,l=o.length;++s<l;)if(f=C[a=o[s]],a in R&&R[a].push(r),f)for(m=(u=e(r,f,C)).length,c=-1;++c<m;)if(x(h=u[c]),f.combineable)for(p=s;++p<l;)if((d=C[o[p]])&&d.combineable&&f.type!==d.type)for(v=(g=e(h,d,C)).length,O=-1;++O<v;)x(g[O]);function x(e,r){var o=n.call(t,e)&&t[e]||[];t[e]=o.concat(r||[])}},n={}.hasOwnProperty,r={}.hasOwnProperty,o=function(e,t,n){return n&&i.call(e,t)&&-1!==n.indexOf(e[t])},i={}.hasOwnProperty,s=function(e,t){var n,r,i,s=e.data,a=e.flags,f=l.call(s,t)?s[t]:null;if(f)return!o(a,"ONLYINCOMPOUND",f);if(i=(n=e.compoundRules).length,r=-1,t.length>=a.COMPOUNDMIN)for(;++r<i;)if(t.match(n[r]))return!0;return!1},l={}.hasOwnProperty,a=function(e,t){for(var n,r=t.length,o=-1;++o<r;)n=t[o],e=e.replace(n[0],n[1]);return e},f=/^\s*|\s*$/g,u=function(e){return e.replace(f,"")};function c(e,t,n){return o(e,"KEEPCASE",t)||n||o(e,"FORBIDDENWORD",t)}var h=function(e,t,n){var r,i=e.data,l=e.flags;if(!(t=u(t)))return null;if(t=a(t,e.conversion.in),s(e,t))return!n&&o(l,"FORBIDDENWORD",i[t])?null:t;if(t.toUpperCase()===t){if(c(l,i[r=t.charAt(0)+t.slice(1).toLowerCase()],n))return null;if(s(e,r))return r}if((r=t.toLowerCase())!==t){if(c(l,i[r],n))return null;if(s(e,r))return r}return null},p=function(e,t){var n,r,o=e.FLAG,i=[];if(!t)return i;if("long"===o){for(r=0,n=t.length;r<n;)i.push(t.substr(r,2)),r+=2;return i}return t.split("num"===o?",":"")},d=/\s/g,g="utf8",O="\n",m="#",v="/",w="\\",C="\t".charCodeAt(0);function R(e,n,r){var o,i,s,l,a;for(a=e.indexOf(v);-1!==a&&e.charAt(a-1)===w;)a=(e=e.slice(0,a-1)+e.slice(a)).indexOf(v,a);(l=e.indexOf(m))>=0?a>=0&&a<l?(o=e.slice(0,a),d.lastIndex=a+1,s=d.exec(e),i=e.slice(a+1,s?s.index:void 0)):o=e.slice(0,l):a>=0?(o=e.slice(0,a),i=e.slice(a+1)):o=e,(o=u(o))&&(i=p(n.flags,i&&u(i)),t(r,o,i,n))}function x(e){return e.toLowerCase()===e?"l":e.toUpperCase()===e?"u":null}var y=function(e){var t=x(e.charAt(0)),n=e.slice(1);return n?t===(n=x(n))?t:"u"===t&&"l"===n?"s":null:t},A="NOSUGGEST";function D(e,t,n,r){var i,s,l,a,f,u,c,p,d,g,O,m,v,w,C=e.flags.TRY,R=C.length,x=e.data,y=e.flags,D=[];for(s=r&&r.length,l=-1;++l<s;)E(r[l],!0);for(s=n.length,l=-1;++l<s;)for(c="",O="",d=a=n[l],g=a.slice(1),m=a.charAt(0),f=-1,u=a.length+1;++f<u;)for(c+=O,p=d,g=(d=g).slice(1),O=m,m=a.charAt(f+1),i=O.toLowerCase()!==O,E(c+d),d&&E(c+m+O+g),w=-1;++w<R;)E(c+(v=C[w])+p),E(c+v+d),i&&(E(c+(v=v.toUpperCase())+p),E(c+v+d));return D;function E(n,r){var i,s=t.state[n];s!==Boolean(s)&&(D.push(n),s=(i=h(e,n))&&!o(y,A,x[i]),t.state[n]=s,s&&(t.weighted[n]=r?10:0,t.suggestions.push(n))),s&&t.weighted[n]++}}var E=function(e){var t,n,r,o,i,s,l,a,f,c,h,d,g,O,m,v,w,C={},R=[],x={in:[],out:[]},y={},A=[],D={},E=[];for(D[j]=[],t=(e=e.toString("utf8")).indexOf(X),O=0;-1!==t;)k(e.slice(O,t)),O=t+1,t=e.indexOf(X,O);for(k(e.slice(O)),t=-1,n=A.length;++t<n;)if((o=(r=A[t].split(Y))[0])===B){for(s=t+parseInt(r[1],10);++t<=s;)r=A[t].split(Y),R.push([r[1],r[2]]);t=s}else if(o===F||o===P){for(c=x[o===F?"in":"out"],s=t+parseInt(r[1],10);++t<=s;)r=A[t].split(Y),c.push([new RegExp(r[1],"g"),r[2]]);t=s}else if(o===b){for(s=t+parseInt(r[1],10);++t<=s;)for(h=(g=A[t].split(Y)[1]).length,d=-1,E.push(g);++d<h;)y[g.charAt(d)]=[];t=s}else if(o===U||o===L){for(s=t+parseInt(r[3],10),i=[],g={type:o,combineable:r[2]===T,entries:i},C[r[1]]=g;++t<=s;){l=(r=A[t].split(Y))[2],a=r[3].split(K),f=r[4],c={add:"",remove:"",match:"",continuation:p(D,a[1])},a&&a[0]!==G&&(c.add=a[0]);try{l!==G&&(c.remove=o===L?J(l):l),f&&f!==q&&(c.match=(o===L?J:Q)(f))}catch(z){c=null}c&&i.push(c)}t=s}else if(o===S){for(s=(f=r[1]).length,v=-1,m=[];++v<s;)(w=f.charAt(v)).toLowerCase()===w&&m.push(w);for(v=-1,s=W.length;++v<s;)w=W[v],-1===f.indexOf(w)&&m.push(w);D[o]=m}else o===j?D[o]=D[o].concat(r[1].split("|")):o===I?D[o]=Number(r[1]):o===N?(D[o]=r[1],y[r[1]]=[]):D[o]=r[1];return isNaN(D[I])&&(D[I]=$),0===D[j].length&&(D[j]=H),D[S]||(D[S]=W.concat()),D[M]||(D[M]=!1),{compoundRuleCodes:y,replacementTable:R,conversion:x,compoundRules:E,rules:C,flags:D};function k(e){(e=u(e))&&e.charCodeAt(0)!==V&&A.push(e)}},N="ONLYINCOMPOUND",b="COMPOUNDRULE",I="COMPOUNDMIN",M="KEEPCASE",F="ICONV",P="OCONV",U="PFX",L="SFX",B="REP",S="TRY",j="KEY",T="Y",W="etaoinshrdlcumwfgypbvkjxqz".split(""),Y=/\s+/,X="\n",k="$",z="^",K="/",q=".",G="0",V="#".charCodeAt(0),$=3,H=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function J(e){return new RegExp(e+k)}function Q(e){return new RegExp(z+e)}var Z=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},_=te,ee=te.prototype;function te(e,t){var n,r,o;if(!(this instanceof te))return new te(e,t);if("string"==typeof e||Z(e)?("string"==typeof t||Z(t))&&(o=[{dic:t}]):e&&("length"in e?(o=e,e=e[0]&&e[0].aff):(e.dic&&(o=[e]),e=e.aff)),!e)throw new Error("Missing `aff` in dictionary");for(e=E(e),this.data={},this.compoundRuleCodes=e.compoundRuleCodes,this.replacementTable=e.replacementTable,this.conversion=e.conversion,this.compoundRules=e.compoundRules,this.rules=e.rules,this.flags=e.flags,n=o?o.length:0,r=-1;++r<n;)(t=o[r])&&t.dic&&this.dictionary(t.dic)}return ee.correct=function(e){return Boolean(h(this,e))},ee.suggest=function(e){var t,n,r,o,i,s,l,f,c,h,p,d,g,O,m,v,w,C,R,x,A,E,N,b,I,M,F,P,U=this.replacementTable,L=this.conversion,B=this.flags.KEY,S=[],j={},T=[];if(!(e=a(u(e),L.in))||this.correct(e))return[];for(P=y(e),i=U.length,o=-1;++o<i;)for(n=U[o],s=e.indexOf(n[0]);-1!==s;)T.push(e.replace(n[0],n[1])),s=e.indexOf(n[0],s+1);for(i=e.length,o=-1;++o<i;)for(v=(w=(d=e.charAt(o)).toLowerCase())!==d,s=-1,f=B.length;++s<f;)if(-1!==(l=(g=B[s]).indexOf(w)))for(O=e.slice(0,l),m=e.slice(l+1),c=-1,h=g.length;++c<h;)c!==l&&(p=g.charAt(c),v&&(p=p.toUpperCase()),T.push(O+p+m));for(i=e.length,o=-1,A=e.charAt(0),r=[""],E=1,N=0;++o<i;){for(d=A,A=e.charAt(o+1),O=e.slice(0,o),n=d===A?"":d+d,s=-1,f=r.length;++s<f;)s<=E&&r.push(r[s]+n),r[s]+=d;++N<3&&(E=r.length)}for(T=T.concat(r),r=[e],n=e.toLowerCase(),e===n?r.push(e.charAt(0).toUpperCase()+n.slice(1)):r.push(n),n=e.toUpperCase(),e!==n&&r.push(n),C=D(this,t={state:{},weighted:j,suggestions:S},r,T),R=0,E=Math.pow(Math.max(15-e.length,3),3),E=Math.min(C.length,E),b=Date.now()+Math.min(30*e.length,200),I=Math.max(Math.pow(10-e.length,3),1);!S.length&&R<E&&(x=R+I,D(this,t,C.slice(R,x)),R=x,!(Date.now()>b)););for(S.sort(function(e,t){return function(e,t){return j[e]===j[t]?0:j[e]>j[t]?-1:1}(e,t)||function(e,t){var n=y(e),r=y(t);if(n!==r){if(n===P)return-1;if(r===P)return 1}return 0}(e,t)||function(e,t){return e.localeCompare(t)}(e,t)}),r=[],M=[],o=-1,i=S.length;++o<i;)F=a(S[o],L.out),S[o]=F,n=F.toLowerCase(),-1===M.indexOf(n)&&(r.push(F),M.push(n));return r},ee.spell=function(e){var t=this.data,n=this.flags,r=h(this,e,!0);return{correct:this.correct(e),forbidden:Boolean(r&&o(n,"FORBIDDENWORD",t[r])),warn:Boolean(r&&o(n,"WARN",t[r]))}},ee.add=function(e,n){var o=this.data,i=n&&r.call(o,n)?o[n].concat():[];return t(o,e,i,this),this},ee.remove=function(e){return this.data[e]=null,this},ee.wordCharacters=function(){return this.flags.WORDCHARS||null},ee.dictionary=function(e){var t,n,r,o,i,s=this.compoundRules,l=this.compoundRuleCodes,a=-1,f=s.length;for(function(e,t,n){var r,o,i;for(o=(i=e.toString(g)).indexOf(O)+1,r=i.indexOf(O,o);-1!==r;)i.charCodeAt(o)!==C&&R(i.slice(o,r),t,n),o=r+1,r=i.indexOf(O,o);R(i.slice(o),t,n)}(e,this,this.data);++a<f;){for(n="",o=-1,i=(t=s[a]).length;++o<i;)0===l[r=t.charAt(o)].length?n+=r:n+="(?:"+l[r].join("|")+")";s[a]=new RegExp(n,"i")}return this},ee.personal=function(e){var t,n,r,o,i,s=this.flags,l=e.toString("utf8").split("\n"),a=l.length,f=-1;for(i=s.FORBIDDENWORD||!1,s.FORBIDDENWORD=i;++f<a;)(t=u(l[f]))&&(r=(t=t.split("/"))[0],o=t[1],(n="*"===r.charAt(0))&&(r=r.slice(1)),this.add(r,o),n&&this.data[r].push(i));return this},_});